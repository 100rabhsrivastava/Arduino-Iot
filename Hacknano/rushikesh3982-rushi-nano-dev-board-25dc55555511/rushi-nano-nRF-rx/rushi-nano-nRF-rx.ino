/*
 **************************************************************************************************
 * Sketch : Receive an LDR values (0-~512) over RF link
 * Board  : RUSHI-NANO-DEVELOPMENT-BOARD
 * Wiring : CE  -> A0 
            CSN -> 9
 * Author : Written by Rushikesh Deshmukh for http://www.rushikesh.cf
 * License: Berkeley Software Distribution (BSD)
 **************************************************************************************************            
 */ 
 
/*
 * ------------------------------------------------------------------------------------------------
 * Library files
 * ------------------------------------------------------------------------------------------------
 */
 #include <SPI.h>     // library for SPI devices
 #include <RF24.h>    // Optimized fork of nRF24L01
                      // (https://github.com/nRF24/RF24)   
/*
 * ------------------------------------------------------------------------------------------------
 * Macros
 * ------------------------------------------------------------------------------------------------
 */
 
/*
 * ------------------------------------------------------------------------------------------------
 * Global declarations
 * ------------------------------------------------------------------------------------------------
 */
 RF24 radio(A0, 9); // CE, CSN
 const byte address[6] = "00001";
 int sensorValue;
/*
 * ------------------------------------------------------------------------------------------------
 * Functions, ISRs
 * ------------------------------------------------------------------------------------------------
 */
 
/*
 * ------------------------------------------------------------------------------------------------
 * put your setup code here, to run once:
 * ------------------------------------------------------------------------------------------------
 */
 void setup() {
  Serial.begin(9600);
  radio.begin();
  radio.openReadingPipe(0, address);
  radio.setPALevel(RF24_PA_MIN);
  radio.startListening();
  } 

/*
 * ------------------------------------------------------------------------------------------------
 * put your main code here, to run repeatedly:
 * ------------------------------------------------------------------------------------------------
 */
 void loop() {
  if (radio.available()) {
    radio.read(&sensorValue, sizeof(sensorValue));
    Serial.println(sensorValue);
    }
  }
